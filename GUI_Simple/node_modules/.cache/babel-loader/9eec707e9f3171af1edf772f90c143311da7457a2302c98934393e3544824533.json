{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ymap_marker = _resolveComponent(\"ymap-marker\");\n  const _component_yandex_map = _resolveComponent(\"yandex-map\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_yandex_map, {\n    coords: $data.currentCenter,\n    zoom: $data.zoom,\n    controls: $data.controls,\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [!!this.token ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.markers, (marker, index) => {\n      return _openBlock(), _createBlock(_component_ymap_marker, {\n        key: index,\n        markerId: index,\n        name: marker.street,\n        ref_for: true,\n        ref: \"myMarker\",\n        coords: marker.coords,\n        street: marker.street,\n        \"balloon-template\": $options.balloonTemplate($data.selectedMarker),\n        onClick: $options.onClick\n      }, null, 8 /* PROPS */, [\"markerId\", \"name\", \"coords\", \"street\", \"balloon-template\", \"onClick\"]);\n    }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.markers, (marker, index) => {\n      return _openBlock(), _createBlock(_component_ymap_marker, {\n        key: index,\n        markerId: index,\n        name: marker.street,\n        ref_for: true,\n        ref: \"myMarker\",\n        coords: marker.coords,\n        street: marker.street,\n        \"balloon-template\": $options.balloonTemplate1($data.selectedMarker, $data.dellSelectedMarkerF),\n        onClick: $options.onClick\n      }, null, 8 /* PROPS */, [\"markerId\", \"name\", \"coords\", \"street\", \"balloon-template\", \"onClick\"]);\n    }), 128 /* KEYED_FRAGMENT */))]))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"coords\", \"zoom\", \"controls\"])]);\n}","map":{"version":3,"mappings":";;;;;;;;;;uBACEA,oBAkCM,cAjCJC,aAgCaC;IA/BRC,MAAM,EAAEC,mBAAa;IACrBC,IAAI,EAAED,UAAI;IACVE,QAAQ,EAAEF,cAAQ;IACnBG,KAAiC,EAAjC;MAAA;MAAA;IAAA;;sBAEF,MAYM,QAZYC,KAAK,kBAAvBR,oBAYM,uCAXJA,oBAUES,6BAT4BL,aAAO,GAAzBM,MAAM,EAAEC,KAAK;2BADzBC,aAUEC;QARGC,GAAG,EAAEH,KAAK;QACVI,QAAQ,EAAEJ,KAAK;QACfK,IAAI,EAAEN,MAAM,CAACO,MAAM;;QACpBC,GAAG,EAAC,UAAU;QACbf,MAAM,EAAEO,MAAM,CAACP,MAAM;QACrBc,MAAM,EAAEP,MAAM,CAACO,MAAM;QACrB,kBAAgB,EAAEE,wBAAe,CAACf,oBAAc;QAChDgB,OAAK,EAAED;;uDAGdnB,oBAYM,uCAXJA,oBAUES,6BAT4BL,aAAO,GAAzBM,MAAM,EAAEC,KAAK;2BADzBC,aAUEC;QARGC,GAAG,EAAEH,KAAK;QACVI,QAAQ,EAAEJ,KAAK;QACfK,IAAI,EAAEN,MAAM,CAACO,MAAM;;QACpBC,GAAG,EAAC,UAAU;QACbf,MAAM,EAAEO,MAAM,CAACP,MAAM;QACrBc,MAAM,EAAEP,MAAM,CAACO,MAAM;QACrB,kBAAgB,EAAEE,yBAAgB,CAACf,oBAAc,EAACA,yBAAmB;QACrEgB,OAAK,EAAED","names":["_createElementBlock","_createVNode","_component_yandex_map","coords","$data","zoom","controls","style","token","_Fragment","marker","index","_createBlock","_component_ymap_marker","key","markerId","name","street","ref","$options","onClick"],"sourceRoot":"","sources":["C:\\Users\\Osstem\\Desktop\\OS_Demo_FrontEnd\\GUI_Simple\\src\\components\\TestTest.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <yandex-map\r\n        :coords=\"currentCenter\"\r\n        :zoom=\"zoom\"\r\n        :controls=\"controls\"\r\n        style=\"width: 100%; height: 100%\"\r\n    >\r\n      <div v-if=\"!!this.token\">\r\n        <ymap-marker\r\n            v-for=\"(marker, index) in markers\"\r\n            :key=\"index\"\r\n            :markerId=\"index\"\r\n            :name=\"marker.street\"\r\n            ref=\"myMarker\"\r\n            :coords=\"marker.coords\"\r\n            :street=\"marker.street\"\r\n            :balloon-template=\"balloonTemplate(selectedMarker)\"\r\n            @click=\"onClick\"\r\n        />\r\n      </div>\r\n      <div v-else>\r\n        <ymap-marker\r\n            v-for=\"(marker, index) in markers\"\r\n            :key=\"index\"\r\n            :markerId=\"index\"\r\n            :name=\"marker.street\"\r\n            ref=\"myMarker\"\r\n            :coords=\"marker.coords\"\r\n            :street=\"marker.street\"\r\n            :balloon-template=\"balloonTemplate1(selectedMarker,dellSelectedMarkerF)\"\r\n            @click=\"onClick\"\r\n        />\r\n      </div>\r\n    </yandex-map>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\nexport default {\r\n  name: \"SimpleMap\",\r\n  data() {\r\n    return {\r\n      zoom: 12,\r\n      currentCenter: [47.2243657, 38.9105216],\r\n      markers: [],\r\n      errors: [],\r\n      markerIconSVG: require(\"@/assets/logo.png\"),\r\n      controls: [\r\n        \"typeSelector\",\r\n        \"zoomControl\",\r\n        \"rulerControl\",\r\n        \"geolocationControl\",\r\n      ],\r\n      staticAnchor: [16, 37],\r\n      staticIconSize: [26, 34],\r\n      selectedMarker: {},\r\n      dellSelectedMarkerF:()=>{},\r\n      token: this.$store.state.isAuthenticated,\r\n    };\r\n  },\r\n  created() {\r\n    axios\r\n        .get(\"api/v1/map/markers\")\r\n        .then((response) => {\r\n          for (var marker_info of response.data) {\r\n            var delete_link = \"http://tagproject-api.sfedu.ru/api/v1/map/markers/delete/\"+marker_info.id\r\n            this.markers.push({\r\n              id: marker_info.id,\r\n              street: marker_info.street,\r\n              name: marker_info.name,\r\n              description: marker_info.description,\r\n              marker_type: marker_info.marker_type,\r\n              coords: marker_info.gps.split(\",\"),\r\n              image: marker_info.get_image,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.errors.push(e);\r\n        });\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"verifyRefreshToken\"]),\r\n\r\n    deleteMarker: function(marker_id) {\r\n      this.verifyRefreshToken();\r\n      axios\r\n          .delete(\r\n              `https://tagproject-api.sfedu.ru/api/v1/map/markers/delete/${marker_id}`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${this.$store.state.accessToken}`,\r\n                },\r\n              }\r\n          )\r\n          .then((response) => {\r\n            console.log(response);\r\n            this.$router.go();\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error.response);\r\n          });\r\n    },\r\n    balloonTemplate1: function(selectedMarker) {\r\n      return `\r\n        <div class=\"balloon\">\r\n            <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\r\n            <div class=\"container\" style=\"width: 300px !important\">\r\n                <div class=\"balloon__info\">\r\n                    <div class=\"col-md-12\">\r\n                        <p class=\"text-center\">${selectedMarker.street}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>`;\r\n    },\r\n    balloonTemplate: function(selectedMarker) {\r\n      return `\r\n<div class=\"balloon\">\r\n    <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\r\n    <div class=\"container\" style=\"width: 300px !important\">\r\n        <div class=\"balloon__info\">\r\n            <div class=\"col-md-12\">\r\n                <p class=\"text-center\">${selectedMarker.street}</p>\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <br><br>\r\n                    <b-button id=\"${selectedMarker.id}\" class=\"delete-marker-button\" variant=\"outline-danger\" onClick=\"${this.deleteMarker(this.selectedMarker.id)}\">Удалить маркер</b-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n`\r\n    },\r\n\r\n    onClick(e) {\r\n      this.selectedMarker =this.markers[e.originalEvent.target.properties._data.markerId]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"isLoggedIn\"]),\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style type=\"text/css\">\r\n.balloon__info {\r\n  margin-top: 10px;\r\n}\r\n.balloon {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.balloon__img {\r\n  max-height: 250px;\r\n  max-width: 250px;\r\n}\r\n\r\n.ymaps-2-1-79-balloon,\r\n.ymaps-2-1-79-balloon__layout {\r\n  border-radius: 20px !important;\r\n  border: 0;\r\n}\r\n\r\n.ymaps-2-1-79-balloon__layout {\r\n  padding: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}