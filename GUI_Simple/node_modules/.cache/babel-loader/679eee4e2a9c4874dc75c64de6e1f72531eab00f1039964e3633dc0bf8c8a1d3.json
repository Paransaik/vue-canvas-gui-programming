{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { mapGetters, mapMutations } from \"vuex\";\nexport default {\n  name: \"SimpleMap\",\n  data() {\n    return {\n      zoom: 12,\n      currentCenter: [47.2243657, 38.9105216],\n      markers: [],\n      errors: [],\n      controls: [\"typeSelector\", \"zoomControl\", \"rulerControl\", \"geolocationControl\"],\n      staticAnchor: [16, 37],\n      staticIconSize: [26, 34],\n      selectedMarker: {},\n      dellSelectedMarkerF: () => {},\n      token: this.$store.state.isAuthenticated\n    };\n  },\n  created() {\n    axios.get(\"api/v1/map/markers\").then(response => {\n      for (var marker_info of response.data) {\n        // var delete_link = \"http://tagproject-api.sfedu.ru/api/v1/map/markers/delete/\"+marker_info.id\n        this.markers.push({\n          id: marker_info.id,\n          street: marker_info.street,\n          name: marker_info.name,\n          description: marker_info.description,\n          marker_type: marker_info.marker_type,\n          coords: marker_info.gps.split(\",\"),\n          image: marker_info.get_image\n        });\n      }\n    }).catch(e => {\n      this.errors.push(e);\n    });\n  },\n  methods: {\n    ...mapMutations([\"verifyRefreshToken\"]),\n    deleteMarker: function (marker_id) {\n      this.verifyRefreshToken();\n      axios.delete(`https://tagproject-api.sfedu.ru/api/v1/map/markers/delete/${marker_id}`, {\n        headers: {\n          Authorization: `Bearer ${this.$store.state.accessToken}`\n        }\n      }).then(response => {\n        console.log(response);\n        this.$router.go();\n      }).catch(function (error) {\n        console.log(error.response);\n      });\n    },\n    balloonTemplate1: function (selectedMarker) {\n      return `\n        <div class=\"balloon\">\n            <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\n            <div class=\"container\" style=\"width: 300px !important\">\n                <div class=\"balloon__info\">\n                    <div class=\"col-md-12\">\n                        <p class=\"text-center\">${selectedMarker.street}</p>\n                    </div>\n                </div>\n            </div>\n        </div>`;\n    },\n    balloonTemplate: function (selectedMarker) {\n      return `\n<div class=\"balloon\">\n    <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\n    <div class=\"container\" style=\"width: 300px !important\">\n        <div class=\"balloon__info\">\n            <div class=\"col-md-12\">\n                <p class=\"text-center\">${selectedMarker.street}</p>\n                <div class=\"d-flex justify-content-center\">\n                    <br><br>\n                    <b-button id=\"${selectedMarker.id}\" class=\"delete-marker-button\" variant=\"outline-danger\" onClick=\"${this.deleteMarker(this.selectedMarker.id)}\">Удалить маркер</b-button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n`;\n    },\n    onClick(e) {\n      this.selectedMarker = this.markers[e.originalEvent.target.properties._data.markerId];\n    }\n  },\n  computed: {\n    ...mapGetters([\"isLoggedIn\"])\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","mapGetters","mapMutations","name","data","zoom","currentCenter","markers","errors","controls","staticAnchor","staticIconSize","selectedMarker","dellSelectedMarkerF","token","$store","state","isAuthenticated","created","get","then","response","marker_info","push","id","street","description","marker_type","coords","gps","split","image","get_image","catch","e","methods","deleteMarker","marker_id","verifyRefreshToken","delete","headers","Authorization","accessToken","console","log","$router","go","error","balloonTemplate1","balloonTemplate","onClick","originalEvent","target","properties","_data","markerId","computed"],"sourceRoot":"","sources":["C:\\Users\\Osstem\\Desktop\\OS_Demo_FrontEnd\\GUI_Simple\\src\\components\\TestTest.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <yandex-map\r\n        :coords=\"currentCenter\"\r\n        :zoom=\"zoom\"\r\n        :controls=\"controls\"\r\n        style=\"width: 100%; height: 100%\"\r\n    >\r\n      <div v-if=\"!!this.token\">\r\n        <ymap-marker\r\n            v-for=\"(marker, index) in markers\"\r\n            :key=\"index\"\r\n            :markerId=\"index\"\r\n            :name=\"marker.street\"\r\n            ref=\"myMarker\"\r\n            :coords=\"marker.coords\"\r\n            :street=\"marker.street\"\r\n            :balloon-template=\"balloonTemplate(selectedMarker)\"\r\n            @click=\"onClick\"\r\n        />\r\n      </div>\r\n      <div v-else>\r\n        <ymap-marker\r\n            v-for=\"(marker, index) in markers\"\r\n            :key=\"index\"\r\n            :markerId=\"index\"\r\n            :name=\"marker.street\"\r\n            ref=\"myMarker\"\r\n            :coords=\"marker.coords\"\r\n            :street=\"marker.street\"\r\n            :balloon-template=\"balloonTemplate1(selectedMarker,dellSelectedMarkerF)\"\r\n            @click=\"onClick\"\r\n        />\r\n      </div>\r\n    </yandex-map>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters, mapMutations } from \"vuex\";\r\nexport default {\r\n  name: \"SimpleMap\",\r\n  data() {\r\n    return {\r\n      zoom: 12,\r\n      currentCenter: [47.2243657, 38.9105216],\r\n      markers: [],\r\n      errors: [],\r\n      controls: [\r\n        \"typeSelector\",\r\n        \"zoomControl\",\r\n        \"rulerControl\",\r\n        \"geolocationControl\",\r\n      ],\r\n      staticAnchor: [16, 37],\r\n      staticIconSize: [26, 34],\r\n      selectedMarker: {},\r\n      dellSelectedMarkerF:()=>{},\r\n      token: this.$store.state.isAuthenticated,\r\n    };\r\n  },\r\n  created() {\r\n    axios\r\n        .get(\"api/v1/map/markers\")\r\n        .then((response) => {\r\n          for (var marker_info of response.data) {\r\n            // var delete_link = \"http://tagproject-api.sfedu.ru/api/v1/map/markers/delete/\"+marker_info.id\r\n            this.markers.push({\r\n              id: marker_info.id,\r\n              street: marker_info.street,\r\n              name: marker_info.name,\r\n              description: marker_info.description,\r\n              marker_type: marker_info.marker_type,\r\n              coords: marker_info.gps.split(\",\"),\r\n              image: marker_info.get_image,\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.errors.push(e);\r\n        });\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"verifyRefreshToken\"]),\r\n\r\n    deleteMarker: function(marker_id) {\r\n      this.verifyRefreshToken();\r\n      axios\r\n          .delete(\r\n              `https://tagproject-api.sfedu.ru/api/v1/map/markers/delete/${marker_id}`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${this.$store.state.accessToken}`,\r\n                },\r\n              }\r\n          )\r\n          .then((response) => {\r\n            console.log(response);\r\n            this.$router.go();\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error.response);\r\n          });\r\n    },\r\n    balloonTemplate1: function(selectedMarker) {\r\n      return `\r\n        <div class=\"balloon\">\r\n            <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\r\n            <div class=\"container\" style=\"width: 300px !important\">\r\n                <div class=\"balloon__info\">\r\n                    <div class=\"col-md-12\">\r\n                        <p class=\"text-center\">${selectedMarker.street}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>`;\r\n    },\r\n    balloonTemplate: function(selectedMarker) {\r\n      return `\r\n<div class=\"balloon\">\r\n    <img class=\"balloon__img\" center id=\"marker-image\" src=\"${selectedMarker.image}\" alt=\"...\"/>\r\n    <div class=\"container\" style=\"width: 300px !important\">\r\n        <div class=\"balloon__info\">\r\n            <div class=\"col-md-12\">\r\n                <p class=\"text-center\">${selectedMarker.street}</p>\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <br><br>\r\n                    <b-button id=\"${selectedMarker.id}\" class=\"delete-marker-button\" variant=\"outline-danger\" onClick=\"${this.deleteMarker(this.selectedMarker.id)}\">Удалить маркер</b-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n`\r\n    },\r\n\r\n    onClick(e) {\r\n      this.selectedMarker =this.markers[e.originalEvent.target.properties._data.markerId]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"isLoggedIn\"]),\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style type=\"text/css\">\r\n.balloon__info {\r\n  margin-top: 10px;\r\n}\r\n.balloon {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.balloon__img {\r\n  max-height: 250px;\r\n  max-width: 250px;\r\n}\r\n\r\n.ymaps-2-1-79-balloon,\r\n.ymaps-2-1-79-balloon__layout {\r\n  border-radius: 20px !important;\r\n  border: 0;\r\n}\r\n\r\n.ymaps-2-1-79-balloon__layout {\r\n  padding: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}